const cmCookieSameSite=consent_manager_parameters.cookieSameSite||"Lax",cmCookieSecure=consent_manager_parameters.cookieSecure||!1,cmCookieAPI=Cookies.withAttributes({expires:cmCookieExpires,path:"/",sameSite:cmCookieSameSite,secure:cmCookieSecure});function debugLog(e,n){window.consentManagerDebugConfig&&window.consentManagerDebugConfig.debug_enabled&&(void 0!==n?console.log("Consent Manager: "+e,n):console.log("Consent Manager: "+e))}function consent_manager_showBox(){var e=[];void 0!==cmCookieAPI.get("consent_manager")&&(cookieData=JSON.parse(cmCookieAPI.get("consent_manager")),cookieData.hasOwnProperty("version")&&(e=cookieData.consents)),consent_managerBox=document.getElementById("consent_manager-background"),consent_managerBox.querySelectorAll("[data-cookie-uids]").forEach(function(n){var t=!0;JSON.parse(n.getAttribute("data-cookie-uids")).forEach(function(n){-1===e.indexOf(n)&&(t=!1)}),t&&(n.checked=!0)}),consent_manager_parameters.hidebodyscrollbar&&(document.querySelector("body").style.overflow="hidden"),document.getElementById("consent_manager-background").classList.remove("consent_manager-hidden");var n=consent_managerBox.querySelectorAll('input[type="checkbox"]')[0];consent_managerBox.focus(),n&&n.focus()}function mapConsentsToGoogleFlags(e){var n={ad_storage:!1,ad_user_data:!1,ad_personalization:!1,analytics_storage:!1,personalization_storage:!1,functionality_storage:!1,security_storage:!1};return e.forEach(function(e){var t=e.toLowerCase();debugLog("Mapping UID",e,t),"analytics"===t&&(n.analytics_storage=!0,debugLog("Mapped analytics to analytics_storage")),"marketing"===t&&(n.ad_storage=!0,n.ad_user_data=!0,n.ad_personalization=!0,debugLog("Mapped marketing to ad_*")),"functional"===t&&(n.functionality_storage=!0,debugLog("Mapped functional to functionality_storage")),"preferences"===t&&(n.personalization_storage=!0,debugLog("Mapped preferences to personalization_storage")),"necessary"===t&&(n.security_storage=!0,debugLog("Mapped necessary to security_storage")),(t.includes("google-analytics")||t.includes("analytics")||t.includes("ga"))&&(n.analytics_storage=!0),(t.includes("google-tag-manager")||t.includes("gtm")||t.includes("tag-manager"))&&(n.analytics_storage=!0,n.ad_storage=!0,n.ad_user_data=!0,n.ad_personalization=!0),(t.includes("google-ads")||t.includes("adwords")||t.includes("google-adwords"))&&(n.ad_storage=!0,n.ad_user_data=!0,n.ad_personalization=!0),(t.includes("facebook-pixel")||t.includes("facebook")||t.includes("meta-pixel"))&&(n.ad_storage=!0,n.ad_user_data=!0,n.ad_personalization=!0),(t.includes("youtube")||t.includes("yt"))&&(n.ad_storage=!0,n.personalization_storage=!0),(t.includes("google-maps")||t.includes("maps")||t.includes("gmaps"))&&(n.functionality_storage=!0,n.personalization_storage=!0),(t.includes("matomo")||t.includes("piwik"))&&(n.analytics_storage=!0),t.includes("hotjar")&&(n.analytics_storage=!0),(t.includes("microsoft-clarity")||t.includes("clarity"))&&(n.analytics_storage=!0),t.includes("linkedin")&&(n.ad_storage=!0,n.ad_user_data=!0,n.ad_personalization=!0),t.includes("tiktok")&&(n.ad_storage=!0,n.ad_user_data=!0,n.ad_personalization=!0),t.includes("pinterest")&&(n.ad_storage=!0,n.ad_user_data=!0,n.ad_personalization=!0),t.includes("booking")&&(n.ad_storage=!0,n.ad_user_data=!0,n.ad_personalization=!0),t.includes("hubspot")&&(n.analytics_storage=!0,n.ad_storage=!0,n.ad_user_data=!0,n.ad_personalization=!0),t.includes("whatsapp")&&(n.functionality_storage=!0)}),debugLog("Final mapped flags",n),n}function consent_manager_showBox(){var e=[];void 0!==cmCookieAPI.get("consent_manager")&&(cookieData=JSON.parse(cmCookieAPI.get("consent_manager")),cookieData.hasOwnProperty("version")&&(e=cookieData.consents)),consent_managerBox=document.getElementById("consent_manager-background"),consent_managerBox.querySelectorAll("[data-cookie-uids]").forEach(function(n){var t=!0;JSON.parse(n.getAttribute("data-cookie-uids")).forEach(function(n){-1===e.indexOf(n)&&(t=!1)}),t&&(n.checked=!0)}),consent_manager_parameters.hidebodyscrollbar&&(document.querySelector("body").style.overflow="hidden"),document.getElementById("consent_manager-background").classList.remove("consent_manager-hidden"),document.getElementById("consent_manager-background").setAttribute("aria-hidden","false");var n=consent_managerBox.querySelectorAll("button.consent_manager-save-selection, button.consent_manager-accept-all, button.consent_manager-accept-none")[0];if(!n){var t=consent_managerBox.querySelectorAll('input[type="checkbox"]');n=t[0]}n&&setTimeout(function(){n.focus()},100)}function consent_manager_hasconsent(e){return void 0!==cmCookieAPI.get("consent_manager")&&-1!==JSON.parse(cmCookieAPI.get("consent_manager")).consents.indexOf(e)}window.consentManagerDebugConfig&&window.consentManagerDebugConfig.debug_enabled&&console.log("Consent Manager: Script loaded"),function(){"use strict";var e,n,t,o=0,a={},r=[],s=-1,c=-1;if(consent_manager_parameters.no_cookie_set=!1,void 0===cmCookieAPI.get("consent_manager")?(cmCookieAPI.set("consent_manager_test","test"),void 0===cmCookieAPI.get("consent_manager_test")?(o=0,consent_manager_parameters.no_cookie_set=!0,console.warn("Addon consent_manager: Es konnte kein Cookie für die Domain "+consent_manager_parameters.domain+" gesetzt werden!")):(cmCookieAPI.remove("consent_manager_test"),o=1)):(a=JSON.parse(cmCookieAPI.get("consent_manager"))).hasOwnProperty("version")&&(r=a.consents,s=parseInt(a.version),c=parseInt(a.cachelogid)),""!==consent_manager_box_template){if(t=(t=(new DOMParser).parseFromString(consent_manager_box_template,"text/html")).getElementById("consent_manager-background"),document.querySelectorAll("body")[0].appendChild(t),e=parseInt(consent_manager_parameters.version),n=parseInt(consent_manager_parameters.cachelogid),e===s&&n===c||(o=1,r=[],g()),debugLog("Startup: Triggering scripts for enabled consents",r),r.forEach(function(e){debugLog("Startup: Processing consent UID",e);var n=t.querySelector('[data-uid="script-'+e+'"]'),o=t.querySelector('[data-uid="script-unselect-'+e+'"]');debugLog("Startup: Elements found",{scriptElement:!!n,unselectElement:!!o}),l(n),u(o)}),r.length>0&&void 0!==window.GoogleConsentModeV2&&"function"==typeof window.GoogleConsentModeV2.setConsent){var i=mapConsentsToGoogleFlags(r);debugLog("Auto-mapping Google Consent Mode flags",r,i),window.GoogleConsentModeV2.setConsent(i)}else debugLog("Auto-mapping skipped",{consents:r,hasGCM:void 0!==window.GoogleConsentModeV2,hasSetConsent:"function"==typeof window.GoogleConsentModeV2?.setConsent});t.querySelectorAll("[data-cookie-uids]").forEach(function(e){JSON.parse(e.getAttribute("data-cookie-uids")).forEach(function(e){r.includes(e)||(u(t.querySelector('[data-uid="script-'+e+'"]')),l(t.querySelector('[data-uid="script-unselect-'+e+'"]')))})}),(consent_manager_parameters.initially_hidden||consent_manager_parameters.no_cookie_set)&&(o=0),o&&m(),t.querySelectorAll(".consent_manager-close").forEach(function(e){e.addEventListener("click",function(){return e.classList.contains("consent_manager-save-selection")?(g(),d("selection")):e.classList.contains("consent_manager-accept-all")?(g(),d("all")):e.classList.contains("consent_manager-accept-none")?(g(),d("none")):e.classList.contains("consent_manager-close")&&(document.getElementById("consent_manager-detail").classList.contains("consent_manager-hidden")||document.getElementById("consent_manager-detail").classList.toggle("consent_manager-hidden")),consent_manager_parameters.hidebodyscrollbar&&(document.querySelector("body").style.overflow="auto"),document.getElementById("consent_manager-background").classList.add("consent_manager-hidden"),document.getElementById("consent_manager-background").setAttribute("aria-hidden","true"),document.dispatchEvent(new CustomEvent("consent_manager-close")),!1})}),document.getElementById("consent_manager-toggle-details")&&document.getElementById("consent_manager-toggle-details").addEventListener("click",function(){document.getElementById("consent_manager-detail").classList.toggle("consent_manager-hidden");var e=!document.getElementById("consent_manager-detail").classList.contains("consent_manager-hidden");return this.setAttribute("aria-expanded",e),!1}),document.getElementById("consent_manager-toggle-details")&&document.getElementById("consent_manager-toggle-details").addEventListener("keydown",function(e){if("Enter"==e.key){e.preventDefault(),document.getElementById("consent_manager-detail").classList.toggle("consent_manager-hidden");var n=!document.getElementById("consent_manager-detail").classList.contains("consent_manager-hidden");return this.setAttribute("aria-expanded",n),!1}}),document.addEventListener("keydown",function(e){if("Escape"===e.key||"Esc"===e.key){var n=document.getElementById("consent_manager-background");n&&!n.classList.contains("consent_manager-hidden")&&(e.preventDefault(),e.stopPropagation(),consent_manager_parameters.hidebodyscrollbar&&(document.querySelector("body").style.overflow="auto"),n.classList.add("consent_manager-hidden"),n.setAttribute("aria-hidden","true"),document.dispatchEvent(new CustomEvent("consent_manager-close")))}},!0),document.addEventListener("keydown",function(e){var n=document.getElementById("consent_manager-background");if(n&&!n.classList.contains("consent_manager-hidden")){var t=document.getElementById("consent_manager-wrapper");if(t&&t.contains(document.activeElement)&&"Tab"===e.key){var o=t.querySelectorAll('button:not([disabled]), input:not([disabled]), a[href], [tabindex]:not([tabindex="-1"])'),a=Array.from(o),r=a[0],s=a[a.length-1];e.shiftKey?document.activeElement===r&&(e.preventDefault(),e.stopPropagation(),s.focus()):document.activeElement===s&&(e.preventDefault(),e.stopPropagation(),r.focus())}}},!0),document.querySelectorAll(".consent_manager-show-box, .consent_manager-show-box-reload").forEach(function(e){e.addEventListener("click",function(){return m(),!1})})}else console.warn("Addon consent_manager: Keine Cookie-Gruppen / Cookies ausgewählt bzw. keine Domain zugewiesen! ("+location.hostname+")");function d(n){if(debugLog("saveConsent: Start",n),r=[],a={consents:[],version:e,consentid:consent_manager_parameters.consentid,cachelogid:consent_manager_parameters.cachelogid},"none"!==n?t.querySelectorAll("[data-cookie-uids]").forEach(function(e){var o=JSON.parse(e.getAttribute("data-cookie-uids"));e.checked||"all"===n?(debugLog("saveConsent: Consent erteilt für",o),o.forEach(function(e){r.push(e),debugLog("saveConsent: Führe Script aus für UID",e);var n=t.querySelector('[data-uid="script-'+e+'"]'),o=t.querySelector('[data-uid="script-unselect-'+e+'"]');debugLog("saveConsent: Elements gefunden",{scriptElement:!!n,unselectElement:!!o,hasDataScript:!!n&&!!n.getAttribute("data-script")}),l(n),u(o)})):(debugLog("saveConsent: Consent verweigert für",o),o.forEach(function(e){u(t.querySelector('[data-uid="script-'+e+'"]')),l(t.querySelector('[data-uid="script-unselect-'+e+'"]'))}))}):(debugLog("saveConsent: Keine Consents (none)"),t.querySelectorAll("[data-cookie-uids]").forEach(function(e){var n=JSON.parse(e.getAttribute("data-cookie-uids"));e.disabled?n.forEach(function(e){r.push(e),l(t.querySelector('[data-uid="script-'+e+'"]')),u(t.querySelector('[data-uid="script-unselect-'+e+'"]'))}):(e.checked=!1,n.forEach(function(e){u(t.querySelector('[data-uid="script-'+e+'"]')),l(t.querySelector('[data-uid="script-unselect-'+e+'"]'))}))})),a.consents=r,debugLog("saveConsent: Finale Consents",r),cmCookieAPI.set("consent_manager",JSON.stringify(a)),void 0!==window.GoogleConsentModeV2&&"function"==typeof window.GoogleConsentModeV2.setConsent){var o=mapConsentsToGoogleFlags(r);debugLog("Mapping consents to Google flags",r,o),window.GoogleConsentModeV2.setConsent(o)}else debugLog("Google Consent Mode not available for mapping");if(void 0===cmCookieAPI.get("consent_manager"))consent_manager_parameters.no_cookie_set=!0,console.warn("Addon consent_manager: Es konnte kein Cookie für die Domain "+document.domain+" gesetzt werden!");else{var s=new XMLHttpRequest,c=consent_manager_parameters.fe_controller+"?rex-api-call=consent_manager&buster="+(new Date).getTime(),i="domain="+document.domain+"&consentid="+consent_manager_parameters.consentid+"&buster="+(new Date).getTime();s.onerror=e=>{console.error("Addon consent_manager: Fehler beim speichern des Consent! "+s.statusText)},s.open("POST",c,!1),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.setRequestHeader("Cache-Control","no-cache, no-store, max-age=0"),s.setRequestHeader("Expires","Thu, 1 Jan 1970 00:00:00 GMT"),s.setRequestHeader("Pragma","no-cache"),s.send(i)}document.querySelectorAll(".consent_manager-show-box-reload").length||1===consent_manager_parameters.forcereload?location.reload():document.dispatchEvent(new CustomEvent("consent_manager-saved",{detail:JSON.stringify(r)}))}function g(){var e=consent_manager_parameters.domain;for(var n in cmCookieAPI.get())cmCookieAPI.remove(encodeURIComponent(n)),cmCookieAPI.remove(encodeURIComponent(n),{domain:e}),cmCookieAPI.remove(encodeURIComponent(n),{path:"/"}),cmCookieAPI.remove(encodeURIComponent(n),{domain:e,path:"/"}),cmCookieAPI.remove(encodeURIComponent(n),{domain:"."+e}),cmCookieAPI.remove(encodeURIComponent(n),{domain:"."+e,path:"/"}),Cookies.remove(encodeURIComponent(n),{domain:window.location.hostname}),Cookies.remove(encodeURIComponent(n),{path:"/"}),Cookies.remove(encodeURIComponent(n),{domain:window.location.hostname,path:"/"})}function l(e){if(e)if(debugLog("addScript: Processing element",e),e.children.length)debugLog("addScript: Element hat bereits children, wird übersprungen");else{var n=e.getAttribute("data-script");if(debugLog("addScript: Encoded script data",{length:n?n.length:0,preview:n?n.substring(0,50)+"...":"empty"}),!n)return void debugLog("addScript: Kein data-script Attribut gefunden");var t="";try{debugLog("addScript: Script erfolgreich dekodiert",{length:(t=window.atob(n)).length,preview:t.substring(0,100)})}catch(e){return console.error("addScript: Fehler beim Base64-Dekodieren",e),void debugLog("addScript: Base64-Dekodierung fehlgeschlagen",e)}if(!t)return void debugLog("addScript: Script-Inhalt ist leer nach Dekodierung");var o=(new DOMParser).parseFromString(t,"text/html");debugLog("addScript: DOM geparst, Scripts gefunden:",o.scripts.length);for(var a=consent_manager_parameters.cspNonce||null,r=0;r<o.scripts.length;r++){var s=o.scripts[r],c=document.createElement("script");debugLog("addScript: Processing script #"+(r+1),{hasSrc:!!s.src,src:s.src||"inline",hasContent:!!s.textContent,contentLength:s.textContent?s.textContent.length:0,attributes:s.attributes.length}),a&&(c.setAttribute("nonce",a),debugLog("addScript: Nonce gesetzt",a));for(var i=0;i<s.attributes.length;i++){var d=s.attributes[i];"nonce"!==d.name&&(c.setAttribute(d.name,d.value),debugLog("addScript: Attribut kopiert",{name:d.name,value:d.value}))}s.src?(c.src=s.src,debugLog("addScript: External script wird geladen",s.src)):(c.textContent=s.textContent,debugLog("addScript: Inline script gesetzt",{contentLength:s.textContent.length,preview:s.textContent.substring(0,100)}));try{document.body.appendChild(c),debugLog("addScript: Script erfolgreich zum DOM hinzugefügt")}catch(e){console.error("addScript: Fehler beim Hinzufügen des Scripts",e),debugLog("addScript: Fehler beim appendChild",e)}}}else debugLog("addScript: Element ist null/undefined")}function u(e){e&&(e.innerHTML="")}function m(){t.querySelectorAll("[data-cookie-uids]").forEach(function(e){var n=!0;JSON.parse(e.getAttribute("data-cookie-uids")).forEach(function(e){-1===r.indexOf(e)&&(n=!1)}),n&&(e.checked=!0)}),consent_manager_parameters.hidebodyscrollbar&&(document.querySelector("body").style.overflow="hidden"),document.getElementById("consent_manager-background").classList.remove("consent_manager-hidden"),document.getElementById("consent_manager-background").setAttribute("aria-hidden","false");var e=document.getElementById("consent_manager-toggle-details");e&&e.setAttribute("aria-expanded","false");var n=t.querySelectorAll("button.consent_manager-save-selection, button.consent_manager-accept-all, button.consent_manager-accept-none")[0];if(!n){var o=t.querySelectorAll('input[type="checkbox"]');n=o[0]}n&&setTimeout(function(){n.focus()},100),document.dispatchEvent(new CustomEvent("consent_manager-show"))}}();